!function(){"use strict";var e=13,i=27,n=37,t=39;angular.module("thatisuday.ng-image-gallery",["ngAnimate"]).provider("ngImageGalleryOpts",function(){var e={thumbnails:!0,thumbSize:80,thumbLimit:!1,inline:!1,bubbles:!0,bubbleSize:20,imgBubbles:!1,bgClose:!1,piracy:!1,imgAnim:"fadeup",textValues:{imageLoadErrorMsg:"Error when loading the image!",deleteButtonTitle:"Delete this image...",editButtonTitle:"Edit this image...",closeButtonTitle:"Close",externalLinkButtonTitle:"Open image in new tab..."},itemClass:"thumb",flexiAttributes:{}};return{setOpts:function(i){angular.extend(e,i)},$get:function(){return e}}}).filter("ngImageGalleryTrust",["$sce",function(e){return function(i,n){return e.trustAs(n||"html",i)}}]).directive("ngGalleryFlexiAttributes",["$parse",function(e){return{restrict:"A",scope:!1,link:function(e,i,n){var t=i.parent().scope().$parent.flexiAttributes;if(t)for(var l of t)i.attr(l.name,l.value)}}}]).directive("ngRightClick",["$parse",function(e){return{restrict:"A",scope:!1,link:function(e,i,n){i.bind("contextmenu",function(i){if(0==e.piracy)return i.preventDefault(),e.piracy})}}}]).directive("ngRightClick",["$parse",function(e){return{restrict:"A",scope:!1,link:function(e,i,n){i.bind("contextmenu",function(i){if(0==e.piracy)return i.preventDefault(),e.piracy})}}}]).directive("showImageAsync",[function(){return{restrict:"A",scope:!1,link:function(e,i,n){var t=new Image;t.src=n.showImageAsync,t.onload=function(){e.$apply(function(){"thumb"==n.asyncKind?(i.css({backgroundImage:'url("'+n.showImageAsync+'")'}),i.empty()):"bubble"==n.asyncKind&&i.css({backgroundImage:'url("'+n.showImageAsync+'")'})})},t.onerror=function(){i.empty()}}}}]).directive("bubbleAutoFit",["$window","$timeout",function(e,i){return{restrict:"A",scope:!1,link:{pre:function(n,t,l){var a=function(){var e=t[0].getBoundingClientRect().width;if(0!=e){var i=n.bubbleSize,l=i+8,a=e/l,s=Math.floor(a),g=8+(e-s*l)/s,o=g+i;n._bubblesInView=s,n._finalBubbleSpace=o,n._bubbleMargin="0 "+g/2+"px",n._safeApply(angular.noop)}};i(a),angular.element(e).bind("resize",function(){i(a)}),n.$watch("inline",function(){i(a)}),n.$watch("bubbleSize",function(){i(a)}),n.$watchCollection("images",function(){i(a)})}}}}]).directive("bubbleAutoScroll",["$window","$timeout",function(e,i){return{restrict:"A",scope:!1,link:function(n,t,l){var a=function(){var e=n._bubblesInView-(n._bubblesInView-n._activeImageIndex);i(function(){if(e>n._bubblesInView-2){var i=n._activeImageIndex+1-n._bubblesInView+1;n._activeImageIndex!=n.images.length-1?n._bubblesContainerMarginLeft="-"+n._finalBubbleSpace*i+"px":n._bubblesContainerMarginLeft="-"+n._finalBubbleSpace*(i-1)+"px"}else n._bubblesContainerMarginLeft="0px"})};angular.element(e).bind("resize",function(){i(a)}),n.$watch("_bubblesInView",function(){i(a)}),n.$watch("_activeImageIndex",function(){i(a)}),n.$watchCollection("images",function(){i(a)})}}}]).directive("ngImageGallery",["$rootScope","$timeout","$q","ngImageGalleryOpts",function(l,a,s,g){return{replace:!0,transclude:!1,restrict:"AE",scope:{images:"=",methods:"=?",conf:"=?",thumbnails:"=?",thumbSize:"=?",thumbLimit:"=?",inline:"=?",bubbles:"=?",bubbleSize:"=?",imgBubbles:"=?",bgClose:"=?",piracy:"=?",imgAnim:"@?",textValues:"=?",onOpen:"&?",onClose:"&?",onDelete:"&?",onEdit:"&?",itemClass:"@?",flexiAttributes:"=?"},template:'<div class="ng-image-gallery img-move-dir-{{_imgMoveDirection}}" ng-class="{inline:inline}" ng-hide="images.length == 0"><div ng-if="thumbnails && !inline" class="ng-image-gallery-thumbnails"><div class="{{ itemClass }}" ng-gallery-flexi-attributes ng-repeat="image in images track by image.id" ng-if="thumbLimit ? $index < thumbLimit : true" ng-click="methods.open($index);" show-image-async="{{image.thumbUrl || image.url}}" title="{{image.title}}" async-kind="thumb" ng-style="{\'width\' : thumbSize+\'px\', \'height\' : thumbSize+\'px\'}"><div class="loader"></div></div></div><div class="ng-image-gallery-modal" ng-if="opened" ng-cloak><div class="ng-image-gallery-backdrop" ng-if="!inline"></div><div class="ng-image-gallery-content" ng-show="!imgLoading" ng-click="backgroundClose($event);"><div class="actions-icons-container"><div class="delete-img" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.deletable" title="{{textValues.deleteButtonTitle}}" ng-click="_deleteImg(image)"></div><div class="edit-img" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.editable" title="{{textValues.editButtonTitle}}" ng-click="_editImg(image)"></div></div><div class="control-icons-container"><a class="ext-url" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.extUrl" href="{{image.extUrl}}" target="_blank" title="{{textValues.externalLinkButtonTitle}}"></a><div class="close" ng-click="methods.close();" ng-if="!inline"  title="{{textValues.closeButtonTitle}}"></div></div><div class="prev" ng-click="methods.prev();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="next" ng-click="methods.next();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="galleria"><div class="galleria-images img-anim-{{imgAnim}} img-move-dir-{{_imgMoveDirection}}"><img class="galleria-image" ng-right-click ng-repeat="image in images track by image.id" ng-if="_activeImg == image" ng-src="{{image.url}}" ondragstart="return false;" ng-attr-alt="{{image.alt || undefined}}"/></div><div class="galleria-title-description-wrapper"><div ng-repeat="image in images track by image.id" ng-if="(image.title || image.desc) && (_activeImg == image)"><div class="title" ng-if="image.title" ng-bind-html="image.title | ngImageGalleryTrust"></div><div class="desc" ng-if="image.desc" ng-bind-html="image.desc | ngImageGalleryTrust"></div></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && !imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', margin: _bubbleMargin}"></span></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble img-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" show-image-async="{{image.bubbleUrl || image.thumbUrl || image.url}}" async-kind="bubble" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', \'border-width\' : bubbleSize/10+\'px\', margin: _bubbleMargin}"></span></div></div></div></div><div class="ng-image-gallery-loader" ng-show="imgLoading"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div><div class="ng-image-gallery-errorplaceholder" ng-show="imgError"><div class="ng-image-gallery-error-placeholder" ng-bind-html="textValues.imageLoadErrorMsg | ngImageGalleryTrust"></div></div></div></div>',link:{pre:function(o,r,c){o._showLoader=function(){o.imgLoading=!0},o._hideLoader=function(){o.imgLoading=!1},o._loadImg=function(e){if(!e)return s.reject();var i=s.defer();e.hasOwnProperty("cached")||o._showLoader();var n=new Image;return n.src=e.url,n.onload=function(){e.hasOwnProperty("cached")||o._hideLoader(),e.hasOwnProperty("cached")||(e.cached=!0),i.resolve(e)},n.onerror=function(){e.hasOwnProperty("cached")||o._hideLoader(),i.reject("Error when loading img")},i.promise},o._setActiveImg=function(e){o.images.indexOf(o._activeImg)-o.images.indexOf(e)==o.images.length-1||o.images.indexOf(o._activeImg)-o.images.indexOf(e)<=0&&o.images.indexOf(o._activeImg)-o.images.indexOf(e)!=-(o.images.length-1)?o._imgMoveDirection="forward":o._imgMoveDirection="backward",o._loadImg(e).then(function(e){o._activeImg=e,o._activeImageIndex=o.images.indexOf(e),o.imgError=!1},function(){o._activeImg=null,o._activeImageIndex=o.images.indexOf(e),o.imgError=!0})},o._safeApply=function(e){var i=this.$root.$$phase;"$apply"==i||"$digest"==i?e&&"function"==typeof e&&e():this.$apply(e)},o._deleteImg=function(e){o.onDelete({img:e,cb:function(){var i=o.images.indexOf(e);console.log(i),o.images.splice(i,1),o._activeImageIndex=0}})},o._editImg=function(e){o.inline||o.methods.close(),o.onEdit({img:e})},o.images=null!=o.images?o.images:[],o.methods=null!=o.methods?o.methods:{},o.conf=null!=o.conf?o.conf:{},o.$watchCollection("conf",function(e){o.thumbnails=null!=e.thumbnails?e.thumbnails:null!=o.thumbnails?o.thumbnails:g.thumbnails,o.thumbSize=null!=e.thumbSize?e.thumbSize:null!=o.thumbSize?o.thumbSize:g.thumbSize,o.thumbLimit=null!=e.thumbLimit?e.thumbLimit:null!=o.thumbLimit?o.thumbLimit:g.thumbLimit,o.inline=null!=e.inline?e.inline:null!=o.inline?o.inline:g.inline,o.bubbles=null!=e.bubbles?e.bubbles:null!=o.bubbles?o.bubbles:g.bubbles,o.bubbleSize=null!=e.bubbleSize?e.bubbleSize:null!=o.bubbleSize?o.bubbleSize:g.bubbleSize,o.imgBubbles=null!=e.imgBubbles?e.imgBubbles:null!=o.imgBubbles?o.imgBubbles:g.imgBubbles,o.bgClose=null!=e.bgClose?e.bgClose:null!=o.bgClose?o.bgClose:g.bgClose,o.piracy=null!=e.piracy?e.piracy:null!=o.piracy?o.piracy:g.piracy,o.imgAnim=null!=e.imgAnim?e.imgAnim:null!=o.imgAnim?o.imgAnim:g.imgAnim,o.textValues=null!=e.textValues?e.textValues:null!=o.textValues?o.textValues:g.textValues,o.itemClass=null!=e.itemClass?e.itemClass:null!=o.itemClass?o.itemClass:g.itemClass,o.flexiAttributes=null!=e.flexiAttributes?e.flexiAttributes:null!=o.flexiAttributes?o.flexiAttributes:g.flexiAttributes}),o.onOpen=null!=o.onOpen?o.onOpen:angular.noop,o.onClose=null!=o.onClose?o.onClose:angular.noop,o.onDelete=null!=o.onDelete?o.onDelete:angular.noop,o.onEdit=null!=o.onEdit?o.onEdit:angular.noop;var u=!0;o.$watchCollection("images",function(){u?u=!1:o.images.length&&o._setActiveImg(o.images[o._activeImageIndex||0])});var m=!0;if(o.$watch("_activeImageIndex",function(e){m?m=!1:o.images.length&&o._setActiveImg(o.images[e])}),o.$watch("inline",function(){a(function(){o.inline&&o.methods.open()})}),o.methods.open=function(e){o._activeImageIndex=e||0,o.opened=!0,o.inline||angular.element(document.body).addClass("body-overflow-hidden"),a(function(){o.onOpen()},300)},o.methods.close=function(){o.opened=!1,angular.element(document.body).removeClass("body-overflow-hidden"),a(function(){o.onClose(),o._activeImageIndex=0},300)},o.methods.next=function(){o._activeImageIndex==o.images.length-1?o._activeImageIndex=0:o._activeImageIndex=o._activeImageIndex+1},o.methods.prev=function(){0==o._activeImageIndex?o._activeImageIndex=o.images.length-1:o._activeImageIndex--},o.backgroundClose=function(e){if(o.bgClose&&!o.inline)for(var i=["galleria-image","destroy-icons-container","ext-url","close","next","prev","galleria-bubble"],n=0;n<e.target.classList.length&&-1==i.indexOf(e.target.classList[n]);n++)o.methods.close()},angular.element(document).bind("keyup",function(l){o.inline||(l.which==t||l.which==e?a(function(){o.methods.next()}):l.which==n?a(function(){o.methods.prev()}):l.which==i&&a(function(){o.methods.close()}))}),window.Hammer){var b=new Hammer(r[0]);b.on("swiperight",function(e){a(function(){o.methods.prev()})}),b.on("swipeleft",function(e){a(function(){o.methods.next()})}),b.on("doubletap",function(e){o.inline||a(function(){o.methods.close()})})}var d=function(){angular.element(document.body).removeClass("body-overflow-hidden")};l.$on("$stateChangeSuccess",d),l.$on("$routeChangeSuccess",d)}}}}])}();